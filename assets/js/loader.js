!function(){"use strict";var e={loader:null,progressbar:null,displayFrequency:"every",siteUrl:"",animationType:"wipe",hasShown:!1,startTime:null,minDisplayTime:2e3,initialized:!1,scrollHandler:null,keyHandler:null,init:function(){this.initialized||(this.initialized=!0,this.loader=document.getElementById("screw-loader-wrapper"),this.progressbar=document.querySelector(".screw-progressbar"),this.loader&&(this.startTime=Date.now(),"undefined"!=typeof screwSettings&&(this.displayFrequency=screwSettings.displayFrequency||"every",this.siteUrl=screwSettings.siteUrl||"",this.animationType=screwSettings.animationType||"wipe"),"progressbar"===this.animationType?this.minDisplayTime=1e3:"none"===this.animationType?this.minDisplayTime=1500:this.minDisplayTime=2e3,"once"!==this.displayFrequency||"1"!==sessionStorage.getItem("screw_shown")?(this.disableScroll(),this.progressbar&&(this.progressbar.style.animation="none",this.updateProgressbar()),"complete"===document.readyState?this.onLoad():window.addEventListener("load",this.onLoad.bind(this)),this.registerLinks()):this.loader.remove()))},onLoad:function(){var e=this,t=Date.now()-this.startTime,i=Math.max(0,this.minDisplayTime-t);setTimeout(function(){e.loader.classList.add("loaded"),"once"===e.displayFrequency&&sessionStorage.setItem("screw_shown","1"),setTimeout(function(){e.enableScroll(),e.loader.remove()},1200)},i)},updateProgressbar:function(){var e=0,t=this,i=Date.now(),n=!1,s=function(){if(!n){var r=Date.now()-i,a=Math.min(r/t.minDisplayTime*90,90);e=a,t.progressbar.style.width=e+"%",requestAnimationFrame(s)}};requestAnimationFrame(s),window.addEventListener("load",function(){n=!0,t.progressbar.style.width="100%"})},registerLinks:function(){var e=this;document.addEventListener("click",function(t){if("every"===e.displayFrequency){var i=t.target;if("A"===i.tagName||(i=i.closest("a"))){var n=i.getAttribute("href");n&&"#"!==n&&0!==n.indexOf("#")&&"_blank"!==i.getAttribute("target")&&-1===n.indexOf("/wp-admin/")&&-1===n.indexOf("/wp-login.php")&&e.isInternalLink(n)}}})},isInternalLink:function(e){return 0!==e.indexOf("http")||0===e.indexOf(this.siteUrl)},disableScroll:function(){document.body.classList.contains("wp-admin")||(this.scrollHandler=function(e){e.preventDefault()},this.keyHandler=function(e){if(!e.target.closest||!e.target.closest(".mati-tooltip-wrapper")&&!e.target.closest(".wp-admin")){[32,33,34,35,36,37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault()}},window.addEventListener("wheel",this.scrollHandler,{passive:!1}),window.addEventListener("touchmove",this.scrollHandler,{passive:!1}),document.addEventListener("keydown",this.keyHandler,!1))},enableScroll:function(){this.scrollHandler&&(window.removeEventListener("wheel",this.scrollHandler,{passive:!1}),window.removeEventListener("touchmove",this.scrollHandler,{passive:!1}),this.scrollHandler=null),this.keyHandler&&(document.removeEventListener("keydown",this.keyHandler,!1),this.keyHandler=null)},showLoader:function(){if(document.querySelectorAll("#screw-loader-wrapper").forEach(function(e){e.remove()}),this.loader){this.disableScroll();var e=this.loader.cloneNode(!0);e.classList.remove("loaded"),document.body.appendChild(e);var t=this,i=Date.now(),n=function(){var n=Date.now()-i,s=Math.max(0,t.minDisplayTime-n);setTimeout(function(){e.classList.add("loaded"),setTimeout(function(){t.enableScroll(),e.remove()},1200)},s)};window.removeEventListener("load",n),window.addEventListener("load",n),"complete"===document.readyState&&n()}}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e.init()}):e.init()}();